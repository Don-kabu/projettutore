{% extends "base.html" %}
{% block title %}Signaler une fuite{% endblock %}
{% block content %}
<section class="container mx-auto px-6 lg:px-20 py-16">
  <h1 class="text-4xl font-bold text-gray-900 mb-10 text-center">Signaler une Fuite</h1>
  <form method="POST" enctype="multipart/form-data" class="max-w-2xl mx-auto bg-white shadow-xl rounded-2xl p-8 space-y-6 fade-in-up">
    {% csrf_token %}
    <div>
      <label class="block text-gray-700 font-semibold mb-2">Description</label>
      <textarea rows="4" placeholder="Décrivez brièvement la fuite..."class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-black focus:outline-none"></textarea>
    </div>
    <div>
      <label class="block text-gray-700 font-semibold mb-2">Photo</label>
      <input type="file" name="photo" id="photo" accept="image/*" capture="environment" class="w-full text-gray-700 bg-gray-50 border border-gray-300 rounded-lg cursor-pointer focus:outline-none" required>
    </div>
    <input type="hidden" name="latitude" id="latitude">
    <input type="hidden" name="longitude" id="longitude">
    <button type="submit" class="w-full py-4 bg-gradient-to-r from-blue-600 to-blue-500 text-white font-bold rounded-lg shadow-lg hover:scale-105 transition transform">Envoyer le signalement
    </button>
  </form>
</section>
{% endblock %}
<script>
  if (navigator.geolocation){
    navigator.geolocation.getCurrentPosition(function(position){
      document.getElementById('latitude').value = position.coords.latitude;
      document.getElementById('longitude').value = position.coords.longitude;
    }, function() {
      alert("impossible d'obtenir votre position. Activez la localisation.");
    });
  } else {
    alert("la géolocalisation n'est pas prise en charge par votre navigateur.");
  }
</script>